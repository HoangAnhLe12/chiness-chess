<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./assets/fonts/fontawesome-free-6.2.1-web/css/all.min.css">
    <link rel="stylesheet" href="./assets/css/main.css">
    <link rel="stylesheet" href="./assets/css/base.css">
    <link rel="stylesheet" href="./assets/css/pvc.css">
    <link rel="stylesheet" href="/assets/css/playpvc.css"/>
    <link rel="icon" href="./assets/img/Logo_Đại_học_Bách_Khoa_Hà_Nội.svg.png" >
    <title>  AI cờ tướng</title>
</head>
<body>
    <div class="App">
        <header class="header">
            <div class="grid">
                <nav class="header__navbar">
                    <ul class="header__navbar-list">
                        <li class="header__navbar-item header__navbar-item-strong">
                             <span class="header__navbar-title-no-point">AI Cờ Tướng</span> 
                            </li>
                    </ul>
                    <div class="header__search" >
                        <div class="header__search-icon">
                            <i class="header__search-icon-color fa-solid fa-magnifying-glass"></i>
                        </div>
                        <input class="header__search-input" type="text" placeholder="Nhập vào để tìm kiếm ... ">
                    </div>
                    <ul class="header__navbar-list">
                        <li class="header__navbar-item header__navbar-item-strong">
                            <a href="/error.html" class="header__navbar-item-link">
                                Đăng nhập
                            </a>
                        </li>

                    </ul>
                </nav>
            </div>
        </header>

        <div class="container">
            <div class="grid">
                <div class="grid__row">
                    <div class="grid__column-2">
                        <nav class="category">
                            <ul class="category-list">
                                <li class="category-item">
                                    <a href="/index.html" class="category-link">
                                        <i class="category-link-icon fa-solid fa-house"></i>
                                        Home</a>
                                </li>
                                <li class="category__item category-link-play-choose">
                                    <a href="" class="category-link category-link-play-choose">
                                        <i class="category-link-icon fa-solid fa-gamepad"></i>
                                        Chơi</a>
                                <ul class="category__play-list">
                                    <li class="category__play-item">
                                        <a href="pvp.html" class="category__play-item-link">
                                            <i class="category-link-icon-son fa-solid fa-people-arrows"></i>
                                            Người với Người
                                        </a> 
                                    </li>
                                    <li class="category__play-item">
                                        <a href="pvc.html" class="category__play-item-link">
                                            <i class="category-link-icon-son fa-solid fa-computer"></i>
                                            Chơi với Máy
                                        </a> 
                                    </li>
                                    <li class="category__play-item">
                                        <a href="cothe.html" class="category__play-item-link">
                                            <i class="category-link-icon-son fa-solid fa-puzzle-piece"></i>
                                            Cờ thế
                                        </a> 
                                    </li>
                                    <li class="category__play-item">
                                        <a href="/error.html" class="category__play-item-link">
                                            <i class="category-link-icon-son fa-solid fa-trophy"></i>
                                            Giải đấu
                                        </a> 
                                    </li>
                                </ul>
                                </li>
                                <li class="category__item category-link-document-choose">
                                    <a href="" class="category-link">
                                        <i class="category-link-icon fa-solid fa-file"></i>
                                        Tài liệu</a>                                       
                                    <ul class="category__document-list">
                                        <li class="category__document-item">
                                            <a href="https://www.xiangqi.com/how-to-play-xiangqi" class="category__document-item-link">
                                                <i class="category-link-icon-son fa-solid fa-graduation-cap"></i>
                                                Học chơi cờ tướng
                                            </a> 
                                        </li>
                                        <li class="category__document-item">
                                            <a href="" class="category__document-item-link">
                                                <i class="category-link-icon-son fa-brands fa-stack-overflow"></i>
                                                Thuật toán
                                            </a> 
                                        </li>
                                        <li class="category__document-item">
                                            <a href="" class="category__document-item-link">
                                                <i class="category-link-icon-son fa-solid fa-hammer"></i>
                                                Các công cụ
                                            </a> 
                                        </li>
                                    </ul>
                                </li>
                                <li class="category__item category-link-group-choose">
                                    <a href="" class="category-link">
                                        <i class="category-link-icon fa-sharp fa-solid fa-square-rss"></i>
                                        Cộng đồng
                                    </a>                                      
                                            <ul class="category__group-list">
                                                <li class="category__group-item">
                                                    <a href="/error.html" class="category__group-item-link">
                                                        <i class="category-link-icon-son fa-brands fa-blogger"></i>
                                                        Blog
                                                    </a> 
                                                </li>
                                                <li class="category__group-item">
                                                    <a href="/error.html" class="category__group-item-link">
                                                        <i class="category-link-icon-son fa-brands fa-facebook"></i>
                                                        Diễn đàn
                                                    </a> 
                                                </li>
                                                <li class="category__group-item">
                                                    <a href="/error.html" class="category__group-item-link">
                                                        <i class="category-link-icon-son fa-solid fa-newspaper"></i>
                                                        Tin tức
                                                    </a> 
                                                </li>
                                                <li class="category__group-item">
                                                    <a href="/error.html" class="category__group-item-link">
                                                        <i class="category-link-icon-son fa-solid fa-user-group"></i>
                                                        Hội nhóm
                                                    </a> 
                                                </li>
                                                <li class="category__group-item">
                                                    <a href="/error.html" class="category__group-item-link">
                                                        <i class="category-link-icon-son fa-solid fa-ranking-star"></i>
                                                        Bảng xếp hạng 
                                                    </a> 
                                                </li>
                                            </ul>
                                </li>
                                <li class="category__item category-link-add-choose">
                                    <a href="" class="category-link">
                                        <i class="category-link-icon fa-solid fa-plus"></i>
                                        Thêm</a>
                                            <ul class="category__add-list">
                                                <li class="category__add-item">
                                                    <a href="/error.html" class="category__add-item-link">
                                                        <i class="category-link-icon-son fa-solid fa-download"></i>
                                                        Download
                                                    </a> 
                                                </li>
                                                <li class="category__Add-item">
                                                    <a href="/error.html" class="category__add-item-link">
                                                        <i class="category-link-icon-son fa-solid fa-book"></i>
                                                    Tài nguyên
                                                    </a> 
                                                </li>
                                                <li class="category__add-item">
                                                    <a href="/error.html" class="category__add-item-link">
                                                        <i class="category-link-icon-son fa-solid fa-scale-balanced"></i>
                                                        Các quy tắc
                                                    </a> 
                                                </li>
                                            </ul>
                                </li>
                            </ul>
                            <ul class="category-help">
                                <li class="catory-item">
                                    <a href="/error.html" class="category-link category-help-character">
                                        <i class="category-help-character-icon fa-solid fa-earth-americas"></i>
                                        Ngôn ngữ
                                    </a>
                                </li>
                                <li class="catory-item">
                                    <a href="/error.html" class="category-link category-help-character">
                                        <i class="category-help-character-icon fa-solid fa-circle-info"></i>
                                        Trợ giúp
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                    <div class="grid__column-10">
                        <div class="home-pvc">
                            <div class="grid__row">
                                <div class="grid__column-6">
                                    <!--Phần giao diện chương trình chơi với máy-->
                                    <div class="home__playpvc-board">
                                        <div class="home__playpvc-board-item">
                                            <i class=" fa-sharp fa-solid fa-computer"></i>
                                            <span class="home__playpvc-board-item-span">Your Friend</span>
                                        </div>
                                      <div id="myBoard" style="width: 450px"></div>
                                      <div class="home__playpvc-board-item">
                                        <i class="fa-sharp fa-solid fa-user"></i>
                                        <span class="home__playpvc-board-item-span">You</span>
                                    </div>
                                    </div>
                                </div>
                                <div class="grid__column-6">
                                    <div class="home__playpvc-setting">
                                      <div id="status"></div>
                                      <div id="pgn"></div>
                                      <div class="home__playpvc-setting-choose">
                                        <button id="startPositionBtn" class="home__playpvc-setting-choose-but">
                                          <i class="home__playpvc-setting-choose-but-icon fa-solid fa-rotate-right"></i>
                                        </button>
                                        <button id="undo" class="home__playpvc-setting-choose-but">
                                          <i class="home__playpvc-setting-choose-but-icon fa-solid fa-arrow-left"></i> 
                                        </button>
                                        <button id="redo" class="home__playpvc-setting-choose-but">
                                          <i class="home__playpvc-setting-choose-but-icon fa-solid fa-arrow-right"></i> 
                                        </button>
                                        <a href="/pvp.html"><button class="home__playpvc-setting-choose-but">
                                            <i class="home__playpvc-setting-choose-but-icon fa-solid fa-plus"></i>
                                          </button>
                                        </a>
                                        </div>
                                        <div class="home__pvc-setting-plus">
                                          <button class="home__playpvc-setting-plus-but">
                                            <i class="home__playpvc-setting-choose-but-icon fa-solid fa-gear"></i>
                                          </button>
                                          <button id="flag" class="home__playpvc-setting-plus-but">
                                            <i class="home__playpvc-setting-plus-but-icon fa-solid fa-flag"></i>Đầu hàng
                                          </button>
                                        </div>
                                      </div>
                                    </div>
                                </div>
                            </div>
                        </div>  
                    </div>
                </div>
            </div>
        </div>

        <footer class="footer">
        </footer>
    </div>
    <script src="js/jquery.js"></script>
<script src="js/xiangqiboard-0.3.3.js"></script>
<script src="js/xiangqi.js"></script>
<!--- Begin Example JS -------------------------------------------------------->
<script>
// NOTE: this example uses the xiangqi.js library:

let board = null;
let game = new Xiangqi();
let $status = $('#status');
let $fen = $('#fen');
let $pgn = $('#pgn');

function onDragStart (source, piece, position, orientation) {
  // do not pick up pieces if the game is over
  if (game.game_over()) return false;

  // only pick up pieces for the side to move
  if ((game.turn() === 'r' && piece.search(/^b/) !== -1) ||
      (game.turn() === 'b' && piece.search(/^r/) !== -1)) {
    return false;
  }
}

function onDrop (source, target) {
  // see if the move is legal
  let move = game.move({
    from: source,
    to: target,
    promotion: 'q' // NOTE: always promote to a queen for example simplicity
  });

  // illegal move
  if (move === null) return 'snapback';

  updateStatus();
}

// update the board position after the piece snap
// for castling, en passant, pawn promotion
function onSnapEnd () {
  board.position(game.fen());
}

function updateStatus () {
    let status = '';
  
    let moveColor = 'đỏ';
    if (game.turn() === 'b') {
      moveColor = 'đen';
    }
  
    // checkmate?
    if (game.in_checkmate()) {
      status = 'Hết Cờ Bên ' + moveColor + ' thua ';
    }
    // draw?
    else if (game.in_draw()) {
      status = 'Hòa cờ';
    }
    // check?
    else if (game.in_check()) {
        status = 'Chiếu Tướng' ;
      }
    // game still on
    else {
      
      status = ' Đến quân ' + moveColor ;
    }

  $status.html(status);
  $fen.html(game.fen());
  $pgn.html(game.pgn());
}

let config = {
  draggable: true,
  position: 'start',
  onDragStart: onDragStart,
  onDrop: onDrop,
  onSnapEnd: onSnapEnd
};
$('#startPositionBtn').on('click', function() {
    board.position('rnbakabnr/9/1c5c1/p1p1p1p1p/9/9/P1P1P1P1P/1C5C1/9/RNBAKABNR');
  game.load('rnbakabnr/9/1c5c1/p1p1p1p1p/9/9/P1P1P1P1P/1C5C1/9/RNBAKABNR r - - 0 1');
  $('#game-status').removeClass('black').addClass('red');
  updateStatus();
  $('#game-over').removeClass('d-inline-block').addClass('d-none');
});
$('#flag').on('click', function(){
  board.clear();
  alert ('Bạn thua');
}
);
$('#undo').on('click', function(){
  game.load('fen');
  game.undo();
  board.position(game.fen());
  
  $('#game-status').removeClass('black').addClass('red');
  updateStatus();
  $('#game-over').removeClass('d-inline-block').addClass('d-none');
});
$('#redo').on('click', function(){
  game.redo();
  game.load('fen');
  board.position(game.fen());
  
  $('#game-status').removeClass('black').addClass('red');
  updateStatus();
  $('#game-over').removeClass('d-inline-block').addClass('d-none');
});
board = Xiangqiboard('myBoard', config);

updateStatus();
</script>
    </body>
    </html>